<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>CASINO.ORG</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <section class="hero" id="home">
    <div class="language-switch">
      <span>RU</span>
      <label class="switch">
        <input type="checkbox" id="langToggle">
        <span class="slider"></span>
      </label>
      <span>KZ</span>
    </div>
    <div class="welcome-text">
      <h1>Добро пожаловать в магазин<br>CASINO.ORG</h1>
      <p>Топовые товары по Казахстану</p>
      <p>Астана, Алматы, Караганда, Павлодар,<br>Кокшетау, Семей, Тараз, Актобе</p>
      <a href="#links">Перейти к ссылкам ↓</a>
    </div>
  </section>

  <section class="links" id="links">
    <div class="button-container">
      <a href="https://t.me/operator" target="_blank">ОПЕРАТОР</a>
      <a href="https://t.me/chat" target="_blank">НАШ ЧАТ</a>
      <a href="https://t.me/channel" target="_blank">НАШ КАНАЛ</a>
    </div>
  </section>

  <section class="faq" id="faq">
    <h2>Часто задаваемые вопросы</h2>
    <div class="faq-item">
      <h3>Кто мы?</h3>
      <p>Мы — органический магазин по продаже качественных товаров по всему Казахстану. Работаем без посредников, доставляем напрямую от поставщика. Надёжность и честность — наш приоритет.</p>
    </div>
    <div class="faq-item">
      <h3>Оплата криптовалютой</h3>
      <p>Вы можете оплатить через популярные криптовалюты — USDT, Bitcoin, Toncoin и другие. После выбора товара, свяжитесь с оператором и получите кошелёк для оплаты. Оплачивая криптой — вы получаете скидку 10% на весь заказ!</p>
    </div>
  </section>

  <section class="reviews" id="reviews">
    <h2>Отзывы</h2>
    <form id="reviewForm">
      <input type="text" id="username" placeholder="Ваше имя (необязательно)">
      <textarea id="message" placeholder="Ваш отзыв..." required></textarea>
      <select id="rating">
        <option value="5">5 звёзд</option>
        <option value="4">4 звезды</option>
        <option value="3">3 звезды</option>
        <option value="2">2 звезды</option>
        <option value="1">1 звезда</option>
      </select>
      <button type="submit">Оставить отзыв</button>
    </form>
    <div id="reviewList"></div>
  </section>

  <!-- Firebase SDK + Инициализация -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-app.js";
    import { getDatabase, ref, push, onValue } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-database.js";

    const firebaseConfig = {
      apiKey: "AIzaSyBrLNZv3CgCeGyNAgENLEGFf70aWJDm4Ik",
      authDomain: "casino-org.firebaseapp.com",
      databaseURL: "https://casino-org-default-rtdb.europe-west1.firebasedatabase.app",
      projectId: "casino-org",
      storageBucket: "casino-org.firebasestorage.app",
      messagingSenderId: "1028536859715",
      appId: "1:1028536859715:web:be40dfc23130a5b347a8f6"
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);

    // Загрузка отзывов
    const reviewList = document.getElementById("reviewList");
    const reviewForm = document.getElementById("reviewForm");

    reviewForm.addEventListener("submit", (e) => {
      e.preventDefault();
      const username = document.getElementById("username").value || "Аноним";
      const message = document.getElementById("message").value;
      const rating = document.getElementById("rating").value;

      const reviewRef = ref(db, "reviews");
      push(reviewRef, {
        username,
        message,
        rating,
        date: Date.now()
      });

      reviewForm.reset();
    });

    const reviewRef = ref(db, "reviews");
    onValue(reviewRef, (snapshot) => {
      const data = snapshot.val();
      const reviews = data ? Object.values(data) : [];

      // Показать последние 10 отзывов
      const last10 = reviews.sort((a, b) => b.date - a.date).slice(0, 10);

      reviewList.innerHTML = last10.map((r) => `
        <div class="review">
          <strong>${r.username}</strong> — ⭐ ${r.rating}<br>
          ${r.message}
        </div>
      `).join("");
    });
  </script>
</body>
</html>